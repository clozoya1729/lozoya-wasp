<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Lozoya | WASP Demo</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
          rel="stylesheet"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
          crossorigin="anonymous">
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
    <link rel="stylesheet" href="./styles.css">
    <script src="https://cdn.jsdelivr.net/npm/mathjs@11.9.1/lib/browser/math.js"></script>
</head>
<body>
<svg id="agent-template"
     viewBox="0 0 500 500"
     style="position:absolute; left:0; top:0; width:0; height:0; overflow:hidden;">
    <g transform="translate(0,0)">
        <circle cx="0" cy="0" r="10" fill="#f64" stroke="#000" stroke-width="1"/>
        <g transform="rotate(35)">
            <rect x="0" y="-6" width="45" height="12" rx="6" fill="#aaa" stroke="#000" stroke-width="1"/>
            <circle cx="45" cy="0" r="8" fill="#f64" stroke="#000" stroke-width="1"/>
            <g transform="translate(45,0) rotate(-25)">
                <rect x="0" y="-5" width="40" height="10" rx="5" fill="#888" stroke="#000" stroke-width="1"/>
                <circle cx="40" cy="0" r="7" fill="#f64" stroke="#000" stroke-width="1"/>
                <g transform="translate(40,0) rotate(30)">
                    <rect x="0" y="-4" width="35" height="8" rx="4" fill="#aaa" stroke="#000" stroke-width="1"/>
                    <circle cx="35" cy="0" r="6" fill="#f64" stroke="#000" stroke-width="1"/>
                    <g transform="translate(35,0)">
                        <rect x="-6" y="-10" width="18" height="20" rx="4" fill="#888" stroke="#000"
                              stroke-width="1"/>
                        <rect x="12" y="-16" width="26" height="6" rx="3" fill="#888" stroke="#000"
                              stroke-width="1"/>
                        <rect x="12" y="10" width="26" height="6" rx="3" fill="#888" stroke="#000"
                              stroke-width="1"/>
                        <rect x="36" y="-16" width="4" height="6" fill="#888" stroke="#000" stroke-width="1"/>
                        <rect x="36" y="10" width="4" height="6" fill="#888" stroke="#000" stroke-width="1"/>
                    </g>
                </g>
            </g>
        </g>
    </g>
</svg>
<div id="theme"
     class="light">
    <nav class="navbar navbar-dark bg-dark navbar-expand px-3 py-1 small" style="padding: 0 4rem;">
        <div class="container-fluid px-3">
            <div class="d-flex align-items-center gap-2">
                <a class="navbar-brand fw-semibold fs-6 py-0 m-0 me-2"
                   href="https://github.com/clozoya1729/lozoya-wasp"
                   target="_blank" rel="noopener noreferrer">
                    Lozoya&nbsp;|&nbsp;WASP Demo
                </a>
                <div class="d-flex align-items-center gap-2">
                    <!-- Playback group -->
                    <div id="group-playback" class="d-flex">
                        <div id="speed-group" class="input-group input-group-sm align-items-center"
                             style="width: 90px;">
                          <span class="input-group-text py-0 px-1 d-flex flex-column align-items-center bg-dark text-white border-secondary">
                            <i class="bi bi-speedometer2"></i>
                            <small class="label">Speed</small>
                          </span>
                            <input id="speed" type="number" value="1.0" min="0.1" max="4.0" step="0.1"
                                   class="form-control form-control-sm text-end py-0 px-1 bg-dark text-white border-secondary">
                        </div>
                        <button id="btn-play" type="button" class="btn btn-outline-secondary btn-sm"
                                onclick="play_pause()">
                            <span class="btn-stack">
                              <i class="bi bi-play"></i>
                              <small id="lbl-play" class="label">Play</small>
                            </span>
                        </button>
                        <button id="btn-step" type="button" class="btn btn-outline-secondary btn-sm"
                                onclick="step_once()">
                            <span class="btn-stack">
                              <i class="bi bi-skip-forward"></i>
                              <small class="label">Step</small>
                            </span>
                        </button>
                        <button id="btn-stop" type="button" class="btn btn-outline-secondary btn-sm"
                                onclick="stop_reset()">
                            <span class="btn-stack">
                              <i class="bi bi-stop"></i>
                              <small class="label">Reset</small>
                            </span>
                        </button>
                    </div>
                    <!-- Theme toggle -->
                    <button id="btn-theme" type="button" class="btn btn-outline-secondary btn-sm"
                            onclick="theme_onclick()">
                          <span class="btn-stack">
                            <i class="bi bi-moon"></i>
                            <small id="lbl-theme" class="label">Light</small>
                          </span>
                    </button>
                </div>
            </div>
        </div>
    </nav>
    <div style="display: flex">
        <div id="plots" style="display:flex;display:none; flex-direction: column; gap: 0px;">
            <div style="display:flex; gap:0px;">
                <div id="plot-velocity" style="width: 400px; height: 400px;"></div>
                <div id="plot-acceleration" style="width: 400px; height: 400px;"></div>
                <div id="plot-jerk" style="width: 400px; height: 400px;"></div>
            </div>
            <div style="display:flex; gap:0px;">
                <div id="plot-angular-velocity" style="width: 400px; height: 200px;"></div>
                <div id="plot-angular-acceleration" style="width: 400px; height: 200px;"></div>
                <div id="plot-angular-jerk" style="width: 400px; height: 200px;"></div>
            </div>
        </div>
        <canvas id="canvas" width="800" height="420"></canvas>
    </div>
</div>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
<script type="module" src="../src/simulation.js"></script>
</body>
</html>
